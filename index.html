    <!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hồ sơ — Nguyễn Nhật Cường</title>
<style>
  :root{
    --bg1:#0f172a;
    --accent1:#7dd3fc;
    --accent2:#a78bfa;
    --glass-bg: rgba(255,255,255,0.06);
    --glass-border: rgba(255,255,255,0.12);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    /* more consistent system stack for iOS-like rendering */
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, system-ui;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    background: radial-gradient(1200px 600px at 10% 20%, rgba(167,139,250,0.12), transparent 10%),
                radial-gradient(1000px 500px at 90% 80%, rgba(125,211,252,0.09), transparent 12%),
                linear-gradient(120deg, #071028 0%, #051022 40%, #0b1320 100%);
    color:#e6eef8;
    display:flex;
    align-items:flex-start; /* allow natural flow and scrolling */
    justify-content:center;
    padding:48px 20px;
    min-height:100vh;
    overflow:auto; /* enable scrolling */
    -webkit-overflow-scrolling: touch; /* smooth on iOS */
  }

  /* animated galaxy/blackhole background + canvas starfield */
  .space { position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden; }
  .galaxy-slide { position:absolute; inset:0; background-repeat:no-repeat; background-size:cover; filter: blur(28px) saturate(130%); opacity:0; mix-blend-mode: screen; will-change: opacity, transform; }
  .galaxy-slide.s1 { background: radial-gradient(600px 400px at 20% 30%, rgba(167,139,250,0.28), transparent 20%), radial-gradient(500px 300px at 80% 70%, rgba(125,211,252,0.22), transparent 18%); animation: galaxyFade 18s ease-in-out infinite; }
  .galaxy-slide.s2 { background: radial-gradient(700px 460px at 70% 20%, rgba(255,150,180,0.22), transparent 20%), radial-gradient(520px 360px at 25% 80%, rgba(150,180,255,0.2), transparent 18%); animation: galaxyFade 18s ease-in-out infinite 9s; }

  /* cinematic black hole (accretion disk, photon ring, event horizon, jets, lensing) */
  .blackhole{ position:absolute; left:50%; top:48%; transform:translate(-50%,-50%); width:min(760px, 80vw); height:min(760px, 80vw); z-index:0; pointer-events:none; filter: none; }
  .blackhole .accretion{ position:absolute; inset:0; border-radius:50%; background: conic-gradient(from 0deg, rgba(255,190,80,0.22), rgba(255,90,80,0.20), rgba(140,100,255,0.14), rgba(80,200,255,0.14)); mix-blend-mode: screen; animation: diskSpin 6s linear infinite; filter: blur(8px) contrast(135%) saturate(140%); transform-origin:center center }
  .blackhole .photon-ring{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:60%; height:60%; border-radius:50%; pointer-events:none; display:flex; align-items:center; justify-content:center; }
  .blackhole .photon-ring::before{ content:''; position:absolute; inset:0; border-radius:50%; box-shadow: 0 0 40px rgba(255,220,180,0.14), 0 0 12px rgba(255,255,255,0.06) inset; background: radial-gradient(circle, rgba(255,220,180,0.05), rgba(255,160,110,0.03) 30%, rgba(255,120,80,0.02) 55%, rgba(0,0,0,0) 70%); mix-blend-mode: screen }
  .blackhole .photon-ring .hotspot{ position:absolute; left:50%; top:50%; width:10%; height:10%; transform-origin: -200% 50%; border-radius:50%; background: radial-gradient(circle, rgba(255,240,200,1), rgba(255,160,60,0.85), rgba(255,120,80,0.4)); box-shadow: 0 0 28px rgba(255,200,100,0.6); animation: hotspotOrbit 1.6s linear infinite }
  .blackhole .event-horizon{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:22%; height:22%; border-radius:50%; background: radial-gradient(circle at 40% 35%, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 60%, rgba(0,0,0,0.98) 100%); box-shadow: inset 0 0 120px rgba(0,0,0,0.95), 0 0 40px rgba(0,0,0,0.9); z-index:1 }
  .blackhole .jet{ position:absolute; left:50%; top:50%; transform:translateX(-50%); width:6px; height:12%; background:linear-gradient(180deg, rgba(255,220,200,0.2), rgba(255,140,80,0.06)); filter: blur(8px); opacity:0.6; border-radius:6px }
  .blackhole .jet-left{ transform:translateX(-50%) translateY(-50%) rotate(-6deg) translateY(-220%); }
  .blackhole .jet-right{ transform:translateX(-50%) translateY(50%) rotate(6deg) translateY(220%); }
  .blackhole .lensing{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:140%; height:140%; border-radius:50%; background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.02), rgba(255,255,255,0) 28%); mix-blend-mode: screen; pointer-events:none; filter: blur(6px) }
  @keyframes diskSpin{ to { transform: rotate(360deg) } }
  @keyframes hotspotOrbit{ from{ transform: rotate(0deg) translateX(160%) } to { transform: rotate(360deg) translateX(160%) } }
  @media (prefers-reduced-motion: reduce){ .blackhole .accretion, .blackhole .photon-ring .hotspot{ animation: none } }

  @keyframes galaxyFade { 0%{opacity:0} 10%{opacity:1} 45%{opacity:1} 55%{opacity:0} 100%{opacity:0} }
  .star-canvas { position:fixed; inset:0; z-index:0; pointer-events:none; display:block; }
  /* subtle colored gradient overlay for depth */
  .sky { position:fixed; inset:0; z-index:0; mix-blend-mode: screen; background: conic-gradient(from 60deg, rgba(167,139,250,0.04), rgba(125,211,252,0.03), rgba(255,255,255,0.02)); opacity:.9; filter: blur(40px) saturate(120%); pointer-events:none; }
  /* reduce motion preference */
  @media (prefers-reduced-motion: reduce){ .galaxy-slide, .sky, .blackhole { animation: none } }

  /* container */
  .card-wrap{
    position:relative;
    z-index:1;
    width:min(720px, 96vw);
    display:grid;
    grid-template-columns: 1fr; /* stacked 1-column layout per request */
    gap:16px;
    align-items:start;
  }

  /* field card styling and inline edit (centered) */
  .field-card{ display:flex; flex-direction:column; align-items:center; text-align:center; gap:8px; padding:18px; border-radius:14px; min-height:64px }
  .field-card .field-row{ display:flex; align-items:center; gap:10px; width:100%; justify-content:center }
  .field-card .title{ margin:0; font-weight:600 }
  .field-card .value{ margin:0; font-weight:700; font-size:16px }
  /* Edit buttons hidden to make fields read-only */
  .edit-btn{ display:none; visibility:hidden; pointer-events:none; }
  .edit-btn:focus{ outline: none; }
  .field-card.editing{ box-shadow: 0 10px 36px rgba(2,6,23,0.6); }
  .input-field{ background:rgba(255,255,255,0.015); border:1px solid rgba(255,255,255,0.08); color:#fff; padding:8px 10px; border-radius:8px; min-width:140px }
  @media (max-width:640px){ .card-wrap{ gap:12px } .field-card{ padding:14px } }

  /* liquid glass card (more transparent, iOS-style) */
  .glass-card{
    position:relative; z-index:2; /* ensure cards are above animated background */
    padding:20px 20px;
    border-radius:18px;
    /* crisper glass: slightly less blur + stronger contrast and border for sharpness */
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.008));
    background-color: rgba(255,255,255,0.01);
    border: 1px solid rgba(255,255,255,0.12);
    box-shadow: 0 6px 20px rgba(2,6,23,0.52), inset 0 1px 0 rgba(255,255,255,0.04);
    backdrop-filter: blur(12px) saturate(220%) contrast(110%);
    -webkit-backdrop-filter: blur(12px) saturate(220%) contrast(110%);
    overflow:hidden;
    min-height:72px;
    -webkit-font-smoothing:antialiased;
    transition: box-shadow .18s ease, transform .14s ease;
  }
  .glass-card::before{
    content: '';
    position:absolute;
    inset:0;
    border-radius:inherit;
    pointer-events:none;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0));
    mix-blend-mode: overlay;
  }
  .glass-card::after{
    content: '';
    position:absolute;
    left:10px; top:8px; right:10px; height:2px;
    border-radius:2px; pointer-events:none;
    background: linear-gradient(90deg, rgba(255,255,255,0.55), rgba(255,255,255,0));
    mix-blend-mode: screen; opacity:0.9;
  }
  .glass-card:active, .glass-card.editing{ transform: translateY(-4px); box-shadow: 0 12px 34px rgba(2,6,23,0.66); }

  /* animated blobs to create 'liquid' look */
  .blob{
    position:absolute;
    filter: blur(28px) contrast(120%);
    opacity:0.9;
    transform-origin:center;
    mix-blend-mode: screen;
    will-change: transform, opacity;
  }
  .blob.one{
    width:260px; height:260px;
    left:-60px; top:-40px;
    background: radial-gradient(circle at 30% 30%, var(--accent1), transparent 40%),
                radial-gradient(circle at 80% 70%, var(--accent2), transparent 40%);
    animation: float1 6s ease-in-out infinite;
  }
  .blob.two{
    width:180px; height:180px;
    right:-40px; bottom:-30px;
    background: radial-gradient(circle at 40% 30%, var(--accent2), transparent 40%),
                radial-gradient(circle at 70% 70%, var(--accent1), transparent 40%);
    animation: float2 7.5s ease-in-out infinite;
  }
  @keyframes float1 {
    0%{transform: translateY(0) rotate(0) scale(.95)}
    50%{transform: translateY(10px) rotate(8deg) scale(1.05)}
    100%{transform: translateY(0) rotate(0) scale(.95)}
  }
  @keyframes float2 {
    0%{transform: translateY(0) rotate(0) scale(1)}
    50%{transform: translateY(-14px) rotate(-6deg) scale(.92)}
    100%{transform: translateY(0) rotate(0) scale(1)}
  }

  /* content */
  .title { font-size:13px; color: #dbeafe; opacity:.95; margin:0 0 6px 0; font-weight:600 }
  .value { font-weight:700; font-size:16px; color:#fff; margin:0; letter-spacing: -0.01em }
  .sub { font-size:13px; color:#bcd1f6; margin-top:8px }
  .big{
    grid-column: 1 / -1;
    display:flex;
    gap:16px;
    align-items:center;
  }

  .avatar{
    width:84px; height:84px; border-radius:14px;
    background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
    border:1px solid rgba(255,255,255,0.06);
    display:flex; align-items:center; justify-content:center;
    font-weight:700; color:#fff; font-size:22px;
    box-shadow: 0 6px 18px rgba(2,6,23,0.6);
    position:relative; overflow:hidden;
  }

  /* small details */
  .meta { display:flex; flex-direction:column; gap:6px; }
  .chip { font-size:13px; padding:6px 10px; border-radius:999px; background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.04) }

  /* music player styles */
  .music-card{ display:flex; flex-direction:column; gap:10px; align-items:flex-start; }
  .player-wrap{ position:relative; width:100%; height:260px; max-width:720px; background:rgba(0,0,0,0.12); border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.04) }
  .player-wrap iframe{ width:100%; height:100%; border:0; display:block }
  .play-overlay{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; color:#fff; font-weight:700; background: linear-gradient(180deg, rgba(0,0,0,0.4), rgba(0,0,0,0.5)); backdrop-filter: blur(8px); cursor:pointer; opacity:0; transition: all .24s ease; font-size:18px; line-height:1.4; padding:24px; text-align:center; }
  .play-overlay.visible{ opacity:1 }
  @media (max-width:640px){ .player-wrap{ height:200px } }

  /* play button animation */
  .play-overlay.visible::before{ content:' '; display:inline; font-size:24px; margin-right:8px; animation:playPulse 1.2s ease-in-out infinite; }
  @keyframes playPulse { 0%{opacity:1; transform:scale(1)} 50%{opacity:0.6; transform:scale(1.1)} 100%{opacity:1; transform:scale(1)} }
  /* responsive */
  @media (max-width:640px){
    .card-wrap{ grid-template-columns: 1fr; }
    .big{ grid-column: auto; gap:12px; flex-direction:row; align-items:center}
  }
</style>
</head>
<body>
  <div class="space" aria-hidden="true">
    <div class="galaxy-slide s1" aria-hidden="true"></div>
    <div class="galaxy-slide s2" aria-hidden="true"></div>
    <canvas class="star-canvas" aria-hidden="true"></canvas>
    <div class="blackhole" aria-hidden="true">
      <div class="accretion" aria-hidden="true"></div>
      <div class="photon-ring" aria-hidden="true"><div class="hotspot" aria-hidden="true"></div></div>
      <div class="event-horizon" aria-hidden="true"></div>
      <div class="jet jet-left" aria-hidden="true"></div>
      <div class="jet jet-right" aria-hidden="true"></div>
      <div class="lensing" aria-hidden="true"></div>
    </div>
  </div>
  <div class="sky" aria-hidden="true"></div>

  <main class="card-wrap" role="main" aria-label="Thông tin cá nhân">
    <!-- profile: avatar + split fields as separate cards -->
    <section class="glass-card" aria-labelledby="profile-name">
      <div class="blob one" aria-hidden="true"></div>
      <div class="avatar" aria-hidden="true">NNC</div>
      <div style="margin-left:14px;">
        <p id="profile-name" class="title">Tiểu sử</p>
        <p class="sub">Tiểu sử cá nhân ngắn</p>
      </div>
    </section>

    <section class="glass-card music-card" aria-labelledby="music-title">
      <p class="title" id="music-title">Nghe nhạc — Bâng Khuâng (JustaTee)</p>
      <div class="player-wrap" id="player-wrap">
        <div id="yt-player"></div>
        <div class="play-overlay" id="play-overlay">Nhấn để bật âm thanh</div>
      </div>
    </section>

    <section class="glass-card field-card" data-field="ho-ten" aria-labelledby="hoten-title">
      <p class="title" id="hoten-title">Họ và tên</p>
      <div class="field-row">
        <p class="value" data-value>Nguyễn Nhật Cường</p>
        <button class="edit-btn" type="button" aria-label="Sửa Họ và tên">✎</button>
      </div>
    </section>

    <section class="glass-card field-card" data-field="sinh" aria-labelledby="sinh-title">
      <p class="title" id="sinh-title">Ngày sinh</p>
      <div class="field-row">
        <p class="value" data-value>30/5</p>
        <button class="edit-btn" type="button" aria-label="Sửa Ngày sinh">✎</button>
      </div>
    </section>

    <section class="glass-card field-card" data-field="cung" aria-labelledby="cung-title">
      <p class="title" id="cung-title">Cung</p>
      <div class="field-row">
        <p class="value" data-value>Song Tử ♊</p>
        <button class="edit-btn" type="button" aria-label="Sửa Cung">✎</button>
      </div>
    </section>

    <section class="glass-card field-card" data-field="yeu-thich" aria-labelledby="yt-title">
      <p class="title" id="yt-title">Yêu thích</p>
      <div class="field-row">
        <p class="value" data-value>Lắng nghe</p>
        <button class="edit-btn" type="button" aria-label="Sửa Yêu thích">✎</button>
      </div>
    </section>

    <section class="glass-card field-card" data-field="vat-ly" aria-labelledby="vl-title">
      <p class="title" id="vl-title">Yêu thích: Lĩnh vực</p>
      <div class="field-row">
        <p class="value" data-value>Vật lý</p>
        <button class="edit-btn" type="button" aria-label="Sửa Lĩnh vực">✎</button>
      </div>
    </section>

    <section class="glass-card field-card" data-field="meo" aria-labelledby="meo-title">
      <p class="title" id="meo-title">Thích</p>
      <div class="field-row">
        <p class="value" data-value>Mèo</p>
        <button class="edit-btn" type="button" aria-label="Sửa Thích">✎</button>
      </div>
    </section>

    <section class="glass-card field-card" data-field="thong-minh" aria-labelledby="tm-title">
      <p class="title" id="tm-title">Thông minh</p>
      <div class="field-row">
        <p class="value" data-value>100%</p>
        <button class="edit-btn" type="button" aria-label="Sửa Thông minh">✎</button>
      </div>
    </section>

    <section class="glass-card field-card" data-field="gioi" aria-labelledby="gioi-title">
      <p class="title" id="gioi-title">Giỏi giang</p>
      <div class="field-row">
        <p class="value" data-value>✔</p>
        <button class="edit-btn" type="button" aria-label="Sửa Giỏi giang">✎</button>
      </div>
    </section>

    <section class="glass-card field-card" data-field="dep" aria-labelledby="dep-title">
      <p class="title" id="dep-title">Đẹp trai</p>
      <div class="field-row">
        <p class="value" data-value>✔</p>
        <button class="edit-btn" type="button" aria-label="Sửa Đẹp trai">✎</button>
      </div>
    </section>

    <section class="glass-card field-card" data-field="dev" aria-labelledby="dev-title">
      <p class="title" id="dev-title">Dev</p>
      <div class="field-row">
        <p class="value" data-value>Developer</p>
      </div>
    </section>

    <section class="glass-card field-card" data-field="ky-thuat-vat-ly" aria-labelledby="ktvl-title">
      <p class="title" id="ktvl-title">Kỹ thuật Vật lý</p>
      <div class="field-row">
        <p class="value" data-value>Kỹ thuật Vật lý</p>
      </div>
    </section>

    <!-- extra info cards -->
    <section class="glass-card" aria-labelledby="about-title">
      <div class="blob one" style="width:180px;height:160px; left:-50px; top:-70px; animation-duration:5.6s;" aria-hidden="true"></div>
      <p class="title" id="about-title">Sở thích</p>
      <p class="value">Lắng nghe âm nhạc, podcast, âm thanh thiên nhiên</p>
      <p class="sub">Thích không gian yên tĩnh khi nghe nhạc</p>
    </section>

    <section class="glass-card" aria-labelledby="zodiac-title">
      <div class="blob two" style="width:140px;height:140px; right:-20px; bottom:-45px; animation-duration:8.4s;" aria-hidden="true"></div>
      <p class="title" id="zodiac-title">Cung hoàng đạo</p>
      <p class="value">Song Tử ♊</p>
      <p class="sub">Tính cách: Tò mò, giao tiếp, linh hoạt</p>
    </section>
  </main>

<script>
  // subtle interactive micro-animations: on mousemove, shift blobs a bit for parallax and pan stars
  const wrapper = document.querySelector('.card-wrap');
  const blobs = document.querySelectorAll('.blob');
  const starCanvas = document.querySelector('.star-canvas');
  const ctx = starCanvas && starCanvas.getContext ? starCanvas.getContext('2d') : null;
  let stars = [], sharpStars = [];
  let width = 0, height = 0;
  let rafId; 

  function resize() {
    if (!starCanvas) return;
    width = starCanvas.width = window.innerWidth;
    height = starCanvas.height = window.innerHeight;
    // regenerate stars density by viewport
    stars = [];
    const count = Math.max(120, Math.floor((width * height) / 9000));
    for (let i=0;i<count;i++){
      stars.push({
        x: Math.random()*width,
        y: Math.random()*height,
        r: Math.random()*1.6 + 0.4,
        a: Math.random()*0.9 + 0.1,
        tw: Math.random()*0.02 + 0.005,
        hue: Math.random()*360
      });
    }
    // sharp, crisp stars (smaller set for contrast)
    sharpStars = [];
    const sharpCount = Math.max(8, Math.floor((width * height) / 60000));
    for (let i=0;i<sharpCount;i++){
      sharpStars.push({ x: Math.random()*width, y: Math.random()*height, r: Math.random()*1.4 + 0.6, a: Math.random()*0.6 + 0.4, tw: Math.random()*0.015 + 0.002 });
    }
  }

  function draw(t){
    if (!ctx) return;
    ctx.clearRect(0,0,width,height);
    const hueShift = (t*0.00002)%360;

    // soft colorful stars with stronger orbital pull and cinematic lensing swirl
    ctx.globalCompositeOperation = 'lighter';
    const cx = width/2, cy = height/2;
    const maxD = Math.max(width,height)/1.3;
    for (let i=0;i<stars.length;i++){
      const s = stars[i];
      const a = s.a * (0.6 + 0.4*Math.sin(t*s.tw + s.x));
      const dx = cx - s.x, dy = cy - s.y; const dist = Math.sqrt(dx*dx+dy*dy)+0.001;
      const pullFactor = Math.pow(Math.max(0, (1 - dist/maxD)), 2.4);
      const ox = dx * pullFactor * 0.0009 * Math.sin(t*0.0009 + s.tw*30);
      const oy = dy * pullFactor * 0.0009 * Math.cos(t*0.0009 + s.tw*30);
      // tangential orbital offset for cinematic swirl
      const angle = Math.atan2(dy, dx);
      const tangential = pullFactor * 1.2;
      const tx = Math.cos(angle + Math.PI/2) * tangential * 1.0;
      const ty = Math.sin(angle + Math.PI/2) * tangential * 1.0;
      const px = (s.x + ox + tx + (t*0.02*(i%3-1))%width);
      const py = (s.y + oy + ty);
      ctx.fillStyle = `hsla(${(s.hue + hueShift)%360}, 88%, 58%, ${a*0.98})`;
      ctx.beginPath();
      ctx.arc(px, py, Math.max(0.3, s.r*0.85), 0, Math.PI*2);
      ctx.fill();

      // cinematic lensing arc for significant pull
      if (pullFactor > 0.35){
        ctx.save();
        const arcAlpha = Math.min(0.28, pullFactor*0.6);
        ctx.strokeStyle = `rgba(255,230,200,${arcAlpha})`;
        ctx.lineWidth = Math.max(0.4, s.r*0.9);
        const arcR = 6 + pullFactor*28;
        const startA = angle + 0.2;
        const endA = angle + 0.2 + 0.6 * pullFactor;
        ctx.beginPath();
        ctx.arc(px, py, arcR, startA, endA);
        ctx.stroke();
        ctx.restore();
      }
    }

    // sharp white stars for crisp points (with pull/swirl)
    ctx.globalCompositeOperation = 'screen';
    for (let i=0;i<sharpStars.length;i++){
      const s = sharpStars[i];
      const twinkle = 0.8 + 0.4*Math.sin(t*s.tw + (s.x+s.y));
      const dx = cx - s.x, dy = cy - s.y; const dist = Math.sqrt(dx*dx+dy*dy)+0.001;
      const pullFactor = Math.pow(Math.max(0, (1 - dist/maxD)), 2.6);
      const ox = dx * pullFactor * 0.0014 * Math.sin(t*0.001 + s.tw*40);
      const oy = dy * pullFactor * 0.0014 * Math.cos(t*0.001 + s.tw*40);
      const angle = Math.atan2(dy, dx);
      const tx = Math.cos(angle + Math.PI/2) * pullFactor * 1.4;
      const ty = Math.sin(angle + Math.PI/2) * pullFactor * 1.4;
      const px = s.x + ox + tx + (t*0.015*(i%2?-1:1))%width;
      const py = s.y + oy + ty;
      ctx.fillStyle = `rgba(255,255,255,${Math.min(1, s.a*twinkle)})`;
      ctx.beginPath();
      ctx.arc(px, py, s.r, 0, Math.PI*2);
      ctx.fill();
      // crisp tiny stroke for definition
      ctx.lineWidth = 0.6; ctx.strokeStyle = `rgba(255,255,255,${Math.min(0.9, s.a*0.6)})`; ctx.stroke();
      // small trailing arc near center for cinematic effect
      if (pullFactor > 0.45){
        ctx.save();
        ctx.strokeStyle = `rgba(255,240,200,${Math.min(0.4, pullFactor*0.6)})`;
        ctx.lineWidth = Math.max(0.3, s.r*0.7);
        const arcR = 4 + pullFactor*22;
        const startA = angle - 0.15;
        const endA = angle + 0.35 * pullFactor;
        ctx.beginPath(); ctx.arc(px, py, arcR, startA, endA); ctx.stroke(); ctx.restore();
      }
    }

    ctx.globalCompositeOperation = 'source-over';
    rafId = requestAnimationFrame(draw);
  }

  function startStars(){
    if (!ctx) return;
    resize();
    if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      rafId = requestAnimationFrame(draw);
      window.addEventListener('resize', resize);
    }
  }
  function stopStars(){
    cancelAnimationFrame(rafId);
    window.removeEventListener('resize', resize);
  }
  startStars();

  // YouTube player for 'Bâng Khuâng' (JustaTee) — robust autoplay with muted iframe fallback and user-click unmute
  (function(){
    const VIDEO_ID = 'ZjzFP93JXUs';
    let ytPlayer, fallbackIframe = false;

    function setIframeAllow(){ // ensure iframe allows autoplay
      const container = document.getElementById('yt-player');
      const iframe = container && container.querySelector('iframe');
      if(iframe) iframe.setAttribute('allow','autoplay; encrypted-media; fullscreen');
    }

    function createYTPlayer(unmuteOnReady = false, cb){
      if (!window.YT || !window.YT.Player) return cb && cb(new Error('YT API not ready'));
      ytPlayer = new YT.Player('yt-player', {
        width: '100%', height: '100%', videoId: VIDEO_ID,
        playerVars: { autoplay: 1, controls: 1, rel: 0, modestbranding: 1, playsinline: 1 },
        events: {
          onReady: function(e){
            try{ if(unmuteOnReady) { e.target.unMute(); } e.target.playVideo(); }catch(_){/*ignore*/}
            setTimeout(checkAutoplay, 700);
            setIframeAllow();
            cb && cb(null, ytPlayer);
          },
          onStateChange: function(e){ if(e.data === YT.PlayerState.PLAYING){ const ol = document.getElementById('play-overlay'); if(ol) ol.classList.remove('visible'); } }
        }
      });
    }

    function createMutedIframeFallback(){
      const container = document.getElementById('yt-player');
      if(!container) return;
      container.innerHTML = '';
      const iframe = document.createElement('iframe');
      iframe.src = `https://www.youtube.com/embed/${VIDEO_ID}?autoplay=1&mute=1&controls=1&rel=0&modestbranding=1&playsinline=1`;
      iframe.setAttribute('allow','autoplay; encrypted-media; fullscreen');
      iframe.setAttribute('frameborder','0');
      iframe.style.width = '100%'; iframe.style.height = '100%';
      container.appendChild(iframe);
      fallbackIframe = true;
      // show overlay so user can click to unmute (user gesture will allow unmuted play)
      const ol = document.getElementById('play-overlay'); if(ol) ol.classList.add('visible');
    }

    function loadYT(){ if(window.YT && window.YT.Player) return createYTPlayer(false); const tag = document.createElement('script'); tag.src = 'https://www.youtube.com/iframe_api'; document.head.appendChild(tag); window.onYouTubeIframeAPIReady = function(){ createYTPlayer(false); } }

    function checkAutoplay(){ const ol = document.getElementById('play-overlay');
      try{
        if (ytPlayer){
          const state = ytPlayer.getPlayerState();
          if(state === YT.PlayerState.PLAYING){ if(ol) ol.classList.remove('visible'); fallbackIframe=false; return; }
          // try muted play to satisfy rules
          ytPlayer.mute(); ytPlayer.playVideo(); if(ol) ol.classList.add('visible');
        } else if(!fallbackIframe){
          // no API player created (blocked) -> create muted iframe fallback
          createMutedIframeFallback();
        }
      }catch(err){ if(ol) ol.classList.add('visible'); }

      // attach overlay click to unmute/play (user gesture)
      const olEl = document.getElementById('play-overlay');
      if(olEl) olEl.onclick = function(){
        olEl.classList.remove('visible');
        // prefer API unmute if available
        if(ytPlayer){ try{ ytPlayer.unMute(); ytPlayer.playVideo(); }catch(e){ console.warn('YT unmute/play failed',e); } }
        else {
          // recreate API player on user gesture to allow unmuted playback
          if(window.YT && window.YT.Player){ createYTPlayer(true); }
          else {
            // load API then create unmuted player
            window.onYouTubeIframeAPIReady = function(){ createYTPlayer(true); };
            const tag2 = document.createElement('script'); tag2.src = 'https://www.youtube.com/iframe_api'; document.head.appendChild(tag2);
          }
        }
      };
    }

    // start
    try{ loadYT(); setTimeout(checkAutoplay, 900); }catch(e){ createMutedIframeFallback(); }
  })();

  window.addEventListener('mousemove', (e) => {
    const cx = window.innerWidth/2, cy = window.innerHeight/2;
    const dx = (e.clientX - cx) / cx;
    const dy = (e.clientY - cy) / cy;
    blobs.forEach((b,i)=>{
      const depth = (i+1)/6;
      b.style.transform = `translate3d(${dx*20*depth}px, ${dy*20*depth}px, 0) scale(${1 - depth*0.02})`;
    });
    // gentle parallax on stars canvas
    if (starCanvas) starCanvas.style.transform = `translate3d(${dx*8}px, ${dy*8}px, 0)`;
  });
  /* Inline editing disabled: fields are read-only by design. */
  /* To re-enable editing later, add a controlled edit flow and persistent storage. */
  // prefers-reduced-motion handling
  const reduced = window.matchMedia('(prefers-reduced-motion: reduce)');
  function handleReduced(e){
    if (e.matches){
      document.querySelectorAll('*').forEach(n => n.style.animation = 'none');
      stopStars();
    } else {
      startStars();
    }
  }
  reduced.addListener(handleReduced);
  handleReduced(reduced);
</script>
</body>
</html>